<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Profile</title>
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/profile.css}">
</head>

<body class="profile-page">

<div th:replace="~{events/fragments/navbar :: navbar}"></div>

<div class="profile-page-wrapper">
    <div class="profile-layout">

        <aside class="profile-sidebar">
            <a href="/profile" class="active">Personal Information</a>
            <a href="/profile/invoices">My Invoices</a>
        </aside>

        <main class="profile-main">
            <h1>Personal Information</h1>

            <div class="profile-card">

                <!-- AVATAR SECTION -->
                <div class="avatar-row">

                    <!-- Avatar image -->
                    <div th:if="${form.avatarUrl != null}" class="avatar-wrapper">
                        <img th:src="${form.avatarUrl}" class="avatar-img" alt="Avatar">
                    </div>

                    <!-- Avatar placeholder -->
                    <div th:if="${form.avatarUrl == null}" class="avatar-wrapper avatar-placeholder">
                        <span
                                th:text="${#strings.substring(form.firstName,0,1)} + ${#strings.substring(form.lastName,0,1)}">
                            AÃ–
                        </span>
                    </div>

                    <div class="avatar-actions">
                        <form th:action="@{/profile/avatar}" method="post" enctype="multipart/form-data">
                            <input type="file"
                                   name="avatar"
                                   id="avatarInput"
                                   accept="image/*"
                                   hidden
                                   onchange="this.form.submit()">
                            <button type="button"
                                    class="secondary-btn"
                                    onclick="document.getElementById('avatarInput').click()">
                                Change photo
                            </button>
                        </form>

                        <form th:action="@{/profile/avatar/remove}" method="post">
                            <button type="submit" class="danger-btn">Remove</button>
                        </form>
                    </div>
                </div>

                <!-- PROFILE FORM -->
                <form class="profile-form"
                      th:action="@{/profile}"
                      th:object="${form}"
                      method="post">

                    <div class="form-row two-cols">
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" th:field="*{firstName}">
                        </div>

                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" th:field="*{lastName}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" th:value="${email}" disabled>
                        </div>
                    </div>

                    <h3 class="section-title">Billing Address</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Street & House Number</label>
                            <input type="text" th:field="*{street}">
                        </div>
                    </div>

                    <div class="form-row two-cols">
                        <div class="form-group">
                            <label>Postal Code</label>
                            <input type="text" th:field="*{postalCode}">
                        </div>

                        <div class="form-group">
                            <label>City</label>
                            <input type="text" th:field="*{city}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Country</label>
                            <input type="text" th:field="*{country}">
                        </div>
                    </div>

                    <h3 class="section-title">Personal Details</h3>

                    <div class="form-row two-cols">
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" th:field="*{birthday}">
                        </div>

                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" th:field="*{phone}">
                        </div>
                    </div>

                    <button type="submit" class="primary-btn">Save changes</button>
                </form>

            </div>
        </main>

    </div>
</div>

</body>
</html>
