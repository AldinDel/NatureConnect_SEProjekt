<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>NatureConnect - Events</title>
    <link rel="stylesheet" th:href="@{/style.css}">
    <link rel="stylesheet" th:href="@{/events.css}">
</head>

<body>
<!-- Erfolgsmeldung Popup -->
<div th:if="${success}" id="success-popup" class="popup-message" th:text="${success}"></div>

<header class="nc-header">
    <div class="nc-container">
        <!-- Logo -->
        <a class="nc-logo" th:href="@{/}" href="/" aria-label="NATUREConnect Home">
            <img src="/images/NatureConnectLogo.png" alt="Logo">
            <span class="nc-brand"><strong>NATURE</strong>Connect</span>
        </a>

        <!-- Navigation -->
        <nav class="nc-nav" id="nc-nav" aria-label="Primary">
            <ul class="nc-left">
                <li><a th:href="@{/}" href="/">Home</a></li>

                <!-- Events mit Dropdown -->
                <li class="dropdown has-dropdown">
                    <a href="#" class="dropbtn with-caret" aria-haspopup="true" aria-expanded="false">Events â–¾</a>
                    <ul class="dropdown-content" role="menu" aria-label="Events">
                      <li role="none"><a role="menuitem" th:href="@{/events/new}" href="/events/new">Create Event</a></li>
                    </ul>
                </li>
            </ul>

            <ul class="nc-right">
                <li><a th:href="@{/about}" href="/about">About Us</a></li>
                <li><span class="divider">|</span></li>
                <li><a th:href="@{/contact}" href="/contact">Contact Us</a></li>
                <li><a class="nc-login" th:href="@{/login}" href="/login">Log In</a></li>
            </ul>
        </nav>
    </div>
</header>

<section class="event-overview">
    <h1>Event Overview</h1>
    <p>Discover exciting events and activities near you</p>

    <!-- ğŸ” Search & Filter Form -->
    <form th:action="@{/events/search}" method="get" class="search-form">

        <!-- Keyword search -->
        <div class="search-bar">
            <span class="search-icon">ğŸ”</span>
            <input type="text" name="q" placeholder="Browse Events..." th:value="${param.q}">
        </div>

        <!-- Category buttons -->
        <div class="category-bar">
            <button type="submit" name="category" value=""
                    th:classappend="${param.category == null or param.category == ''} ? 'active' : ''">
                All Events
            </button>
            <button type="submit" name="category" value="Camping"
                    th:classappend="${param.category == 'Camping'} ? 'active' : ''">
                Camping
            </button>
            <button type="submit" name="category" value="Swimming"
                    th:classappend="${param.category == 'Swimming'} ? 'active' : ''">
                Swimming
            </button>
            <button type="submit" name="category" value="Hiking"
                    th:classappend="${param.category == 'Hiking'} ? 'active' : ''">
                Hiking
            </button>
            <button type="submit" name="category" value="Canyoning"
                    th:classappend="${param.category == 'Canyoning'} ? 'active' : ''">
                Canyoning
            </button>
            <button type="submit" name="category" value="Football Camp"
                    th:classappend="${param.category == 'Football Camp'} ? 'active' : ''">
                Football Camp
            </button>
            <button type="submit" name="category" value="Climbing"
                    th:classappend="${param.category == 'Climbing'} ? 'active' : ''">
                Climbing
            </button>
        </div>
    </form>

    <!-- Events grid -->
    <div class="event-grid">
        <div class="event-card" th:each="event : ${events}">
            <div class="card-image">
                <img th:src="@{${event.imageUrl}}" th:alt="${event.title}">
                <span class="tag" th:text="${event.category}">Outdoor</span>
            </div>

            <div class="card-content">
                <div class="card-header">
                    <h3 th:text="${event.title}">Event Title</h3>
                    <span class="difficulty yellow" th:text="${event.difficulty}">Intermediate</span>
                </div>

                <p th:text="${event.description}">Event description here...</p>

                <ul class="details">
                    <li>ğŸ“… <span th:text="${#temporals.format(event.date, 'MMMM dd, yyyy')}"></span></li>
                    <li>ğŸ•’ <span th:text="${#temporals.format(event.startTime, 'HH:mm')} + ' - ' + ${#temporals.format(event.endTime, 'HH:mm')}"></span></li>
                    <li>ğŸ“ <span th:text="${event.location}"></span></li>
                    <li>ğŸ‘¥ <span th:text="${event.minParticipants} + ' - ' + ${event.maxParticipants} + ' Participants'"></span></li>
                </ul>

                <div class="footer">
                    <span class="price" th:text="'â‚¬ ' + ${#numbers.formatDecimal(event.price, 1, 2)}"></span>
                    <div class="buttons">
                        <a th:href="@{/events/{id}(id=${event.id})}" class="view-btn">View Details</a>
                        <a th:href="@{/events/{id}/edit(id=${event.id})}" class="edit-btn">Edit</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

</body>
</html>