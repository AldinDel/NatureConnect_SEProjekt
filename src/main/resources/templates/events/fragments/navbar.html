<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<th:block th:fragment="navbar">
    <header class="nc-header">
        <div class="nc-container">
            <div class="nc-top">
                <a class="nc-logo" th:href="@{/}" href="/">
                    <img th:src="@{/images/NatureConnectLogo.png}" src="/images/NatureConnectLogo.png" alt="Logo">
                    <span class="nc-brand"><strong>NATURE</strong>Connect</span>
                </a>
            </div>

            <div class="nc-divider"></div>

            <nav class="nc-nav" id="nc-nav">
                <ul class="nc-left">
                    <li><a th:href="@{/}" href="/">Home</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropbtn">Events â–¾</a>
                        <ul class="dropdown-content">
                            <li><a th:href="@{/events}" href="/events">All Events</a></li>

                            <li sec:authorize="hasAnyRole('ADMIN', 'ORGANIZER')">
                                <a th:href="@{/events/new}" href="/events/new">Create Event</a>
                            </li>
                        </ul>
                    </li>
                    <li><a th:href="@{/bookings}" href="/bookings">Bookings</a></li>

                    <li class="nav-item" sec:authorize="hasAnyRole('FRONT', 'ADMIN')">
                        <a class="nav-link" th:href="@{/event_management}">Event Management</a>
                    </li>
                </ul>

                <ul class="nc-right">
                    <li sec:authorize="!isAuthenticated() or hasRole('CUSTOMER')">
                        <a th:href="@{/about}" href="/about">About Us</a>
                    </li>

                    <li sec:authorize="!isAuthenticated() or hasRole('CUSTOMER')">
                        <span class="divider">|</span>
                    </li>

                    <li sec:authorize="!isAuthenticated() or hasRole('CUSTOMER')">
                        <a th:href="@{/contact}" href="/contact">Contact Us</a>
                    </li>

                    <li sec:authorize="!isAuthenticated()">
                        <a class="nc-login" th:href="@{/login}" href="/login">Log In</a>
                    </li>

                    <li sec:authorize="isAuthenticated()" class="dropdown">
                        <a href="#" class="dropbtn profile-link">
                            <span>ðŸ‘¤</span>
                            <span th:text="'Welcome, ' + ${currentUserName != null ? currentUserName : #authentication.name}">User</span>
                            <span> â–¾</span>
                        </a>

                        <ul class="dropdown-content">

                            <li class="badge-item" sec:authorize="hasRole('ADMIN')">
                                <div class="badge-card badge-gold">
                                    <span class="badge-role">Back Office</span>
                                    <span class="badge-sub">Admin</span>
                                </div>
                            </li>


                            <li class="badge-item" sec:authorize="hasRole('FRONT')">
                                <div class="badge-card badge-blue">
                                    <span class="badge-role">Front Office</span>
                                </div>
                            </li>

                            <li class="badge-item" sec:authorize="hasRole('ORGANIZER')">
                                <div class="badge-card badge-black">
                                    <span class="badge-role">Organizer</span>
                                </div>
                            </li>


                            <li class="badge-item" sec:authorize="hasRole('CUSTOMER') and !hasRole('ORGANIZER')">
                                <div class="badge-card badge-green">
                                    <span class="badge-role">Customer</span>
                                </div>
                            </li>

                            <li sec:authorize="hasRole('CUSTOMER')" class="dropdown nested-dropdown">
                                <a href="#" class="menu-link">My Profile â–¸</a>
                                <ul class="dropdown-content nested-content">
                                    <li>
                                        <a th:href="@{/invoices}" class="menu-link">My Invoices</a>
                                    </li>
                                </ul>
                            </li>

                            <li>
                                <form th:action="@{/logout}" method="post" style="margin:0">
                                    <button type="submit" class="logout-btn">Log out</button>
                                </form>
                            </li>

                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
</th:block>
</body>
</html>
